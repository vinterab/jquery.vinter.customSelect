/*! jquery.vinter.customSelect - v1.0.0 - 2012-08-31
* https://github.com/vinterab/jquery.vinter.customSelect/
* Copyright (c) 2012 Vinter AB; Licensed MIT */
(function(a,b){a.fn.customSelect=function(c){var d={wrapperClass:"ui-select-wrap",selectedClass:"s-selected",includeActiveItem:!1,hideText:!1,onChange:b,onInit:b,onOpened:b,onClosed:b,showEvent:"click",hideEvent:"click"};return c=a.extend(!0,d,c),this.each(function(){function e(a){var d=a.data.options;b.removeClass("s-active").find("ul").hide(),b.on(c.showEvent,{options:d},f),typeof c.onClosed=="function"&&c.onClosed(d)}function f(f){var g,h,i=f.data.options;b.off(c.showEvent),b.addClass("s-active").find("ul").show(),typeof c.onOpened=="function"&&c.onOpened(i),b.on("click","."+c.selectedClass,{options:i},e),b.on("click","li",function(e){var f=a(e.currentTarget),g=f.index();c.includeActiveItem===!1&&b.find("li").show().eq(g).hide(),b.find("."+c.selectedClass).html(f.data("content")),typeof c.onChange=="function"&&c.onChange(i[g]),a(d).find("option").removeAttr("selected").eq(g).attr("selected","selected"),b.find("."+c.selectedClass).trigger("click")})}function g(a){var b="";return a.data("img")&&(b+='<img src="'+a.data("img")+'" alt="'+a.text()+'" />'),c.hideText===!1&&(b+=a.text()),b}function h(){var e=a("<div />").addClass(c.wrapperClass),h=d.find("option"),i=d.find("option[selected]").length?d.find("option[selected]").eq(0):h.eq(0);e.append(a("<div />",{"class":c.selectedClass,html:g(i)}));var j=a("<ul>");for(var k=0,l=h.length,m,n;k<l;k++)m=a(h[k]),n=a("<li />",{data:{value:m.attr("value"),content:g(m),text:m.text()},html:g(m)}),j.append(n),c.includeActiveItem===!1&&k===i.index()&&n.hide();e.append(j),d.after(e),d.hide(),b=e,b.on(c.showEvent,{options:h},f),typeof c.onInit=="function"&&c.onInit(b,h)}var b,d=a(this);h()})}})(jQuery);