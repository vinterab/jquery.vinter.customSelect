/*! jquery.vinter.customSelect - v1.0.0 - 2012-08-31
* https://github.com/vinterab/jquery.vinter.customSelect/
* Copyright (c) 2012 Vinter AB; Licensed MIT */
(function(a,b){a.fn.customSelect=function(c){var d={wrapperClass:"ui-select-wrap",selectedClass:"s-selected",includeActiveItem:!1,hideText:!1,onChange:b,onInit:b,showEvent:"click",hideEvent:"click"};return c=a.extend(!0,d,c),this.each(function(){function d(a){b.removeClass("s-active").find("ul").hide(),b.on(c.showEvent,{options:a.data.options},e)}function e(e){var f,g,h=e.data.options;b.off(c.showEvent),b.addClass("s-active").find("ul").show(),b.on("click","."+c.selectedClass,{options:h},d),b.on("click","li",function(d){var e=a(d.currentTarget);c.includeActiveItem===!1&&b.find("li").show().eq(e.index()).hide(),b.find("."+c.selectedClass).html(e.data("content")),typeof c.onChange=="function"&&c.onChange(h[e.index()]),b.find("."+c.selectedClass).trigger("click")})}function f(a){var b="";return a.data("img")&&(b+='<img src="'+a.data("img")+'" alt="'+a.text()+'" />'),c.hideText===!1&&(b+=a.text()),b}function g(){var d=a("<div />").addClass(c.wrapperClass),g=b.find("option"),h=b.find("option[selected]").length?b.find("option[selected]").eq(0):g.eq(0);d.append(a("<div />",{"class":c.selectedClass,html:f(h)}));var i=a("<ul>");for(var j=0,k=g.length,l,m;j<k;j++)l=a(g[j]),m=a("<li />",{data:{value:l.attr("value"),content:f(l),text:l.text()},html:f(l)}),i.append(m),c.includeActiveItem===!1&&j===h.index()&&m.hide();d.append(i),b.after(d),b.remove(),b=d,b.on(c.showEvent,{options:g},e),typeof c.onInit=="function"&&c.onInit(b,g)}var b=a(this);g()})}})(jQuery);